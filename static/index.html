<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Control Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1 class="logo">
                    <span class="logo-icon">ü§ñ</span>
                    Claude Control
                </h1>
                <span class="version">v1.0.0</span>
            </div>
            <div class="header-right">
                <div class="health-indicator" id="health-indicator">
                    <span class="health-dot"></span>
                    <span class="health-text">Connecting...</span>
                </div>
                <button class="btn btn-icon" onclick="refreshAll()" title="Refresh All">
                    üîÑ
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Sidebar - Session List -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <h2>Sessions</h2>
                    <button class="btn btn-primary btn-sm" onclick="showCreateSessionModal()">
                        + New
                    </button>
                </div>
                <div class="session-stats" id="session-stats">
                    <div class="stat-item">
                        <span class="stat-value" id="stat-total">0</span>
                        <span class="stat-label">Total</span>
                    </div>
                    <div class="stat-item running">
                        <span class="stat-value" id="stat-running">0</span>
                        <span class="stat-label">Running</span>
                    </div>
                    <div class="stat-item error">
                        <span class="stat-value" id="stat-error">0</span>
                        <span class="stat-label">Error</span>
                    </div>
                </div>
                <div class="session-list" id="session-list">
                    <div class="loading">Loading sessions...</div>
                </div>
            </aside>

            <!-- Main Panel -->
            <section class="main-panel">
                <!-- Tab Navigation -->
                <div class="tab-navigation">
                    <button class="tab-btn active" data-tab="command" onclick="switchTab('command')">
                        üí¨ Command
                    </button>
                    <button class="tab-btn" data-tab="logs" onclick="switchTab('logs')">
                        üìã Logs
                    </button>
                    <button class="tab-btn" data-tab="batch" onclick="switchTab('batch')">
                        üì¶ Batch
                    </button>
                </div>

                <!-- Tab Content -->
                <div class="tab-content">
                    <!-- Command Tab -->
                    <div class="tab-pane active" id="command-tab">
                        <div class="no-session-selected" id="no-session-message">
                            <div class="empty-state">
                                <span class="empty-icon">üëà</span>
                                <h3>Select a Session</h3>
                                <p>Choose a session from the list to execute commands</p>
                            </div>
                        </div>
                        <div class="command-panel hidden" id="command-panel">
                            <div class="selected-session-info" id="selected-session-info">
                                <!-- Session info will be displayed here -->
                            </div>
                            <div class="command-input-area">
                                <textarea
                                    id="command-input"
                                    placeholder="Enter your prompt here..."
                                    rows="4"
                                ></textarea>
                                <div class="command-options">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="skip-permissions" checked>
                                        Skip Permissions
                                    </label>
                                    <label class="input-label">
                                        Timeout (s):
                                        <input type="number" id="command-timeout" value="600" min="1" max="3600">
                                    </label>
                                    <label class="input-label">
                                        Max Turns:
                                        <input type="number" id="command-max-turns" value="50" min="1" max="100">
                                    </label>
                                </div>
                                <div class="command-actions">
                                    <button class="btn btn-primary" onclick="executeCommand()">
                                        ‚ñ∂Ô∏è Execute
                                    </button>
                                    <button class="btn btn-secondary" onclick="clearOutput()">
                                        Clear
                                    </button>
                                </div>
                            </div>
                            <div class="command-output-area">
                                <div class="output-header">
                                    <h3>Output</h3>
                                    <span class="execution-status" id="execution-status"></span>
                                </div>
                                <pre class="output-content" id="command-output">No output yet</pre>
                            </div>
                        </div>
                    </div>

                    <!-- Logs Tab -->
                    <div class="tab-pane" id="logs-tab">
                        <div class="logs-panel">
                            <div class="logs-header">
                                <h3>Session Logs</h3>
                                <div class="logs-controls">
                                    <select id="log-session-select" onchange="loadSessionLogs()">
                                        <option value="">Select Session</option>
                                    </select>
                                    <select id="log-level-filter" onchange="loadSessionLogs()">
                                        <option value="">All Levels</option>
                                        <option value="DEBUG">DEBUG</option>
                                        <option value="INFO">INFO</option>
                                        <option value="WARNING">WARNING</option>
                                        <option value="ERROR">ERROR</option>
                                        <option value="COMMAND">COMMAND</option>
                                        <option value="RESPONSE">RESPONSE</option>
                                    </select>
                                    <button class="btn btn-sm" onclick="loadSessionLogs()">
                                        üîÑ Refresh
                                    </button>
                                </div>
                            </div>
                            <div class="logs-content" id="logs-content">
                                <div class="empty-state">
                                    <span class="empty-icon">üìã</span>
                                    <p>Select a session to view logs</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Batch Tab -->
                    <div class="tab-pane" id="batch-tab">
                        <div class="batch-panel">
                            <div class="batch-header">
                                <h3>Batch Command Execution</h3>
                            </div>
                            <div class="batch-sessions">
                                <label>Select Sessions:</label>
                                <div class="batch-session-list" id="batch-session-list">
                                    <!-- Session checkboxes will be rendered here -->
                                </div>
                                <div class="batch-select-actions">
                                    <button class="btn btn-sm" onclick="selectAllSessions()">Select All</button>
                                    <button class="btn btn-sm" onclick="deselectAllSessions()">Deselect All</button>
                                </div>
                            </div>
                            <div class="batch-input">
                                <textarea
                                    id="batch-command-input"
                                    placeholder="Enter command to execute on all selected sessions..."
                                    rows="4"
                                ></textarea>
                                <div class="batch-options">
                                    <label class="checkbox-label">
                                        <input type="checkbox" id="batch-parallel" checked>
                                        Execute in Parallel
                                    </label>
                                    <label class="input-label">
                                        Timeout (s):
                                        <input type="number" id="batch-timeout" value="600" min="1" max="3600">
                                    </label>
                                </div>
                                <button class="btn btn-primary" onclick="executeBatchCommand()">
                                    üì¶ Execute Batch
                                </button>
                            </div>
                            <div class="batch-results" id="batch-results">
                                <!-- Batch results will be displayed here -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Create Session Modal -->
        <div class="modal-overlay hidden" id="create-session-modal">
            <div class="modal">
                <div class="modal-header">
                    <h3>Create New Session</h3>
                    <button class="btn-close" onclick="hideCreateSessionModal()">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="new-session-name">Session Name</label>
                        <input type="text" id="new-session-name" placeholder="my-session">
                    </div>
                    <div class="form-group">
                        <label for="new-session-model">Model</label>
                        <select id="new-session-model">
                            <option value="">Default</option>
                            <option value="claude-sonnet-4-20250514">Claude Sonnet 4</option>
                            <option value="claude-opus-4-20250514">Claude Opus 4</option>
                            <option value="claude-3-5-sonnet-20241022">Claude 3.5 Sonnet</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="new-session-max-turns">Max Turns</label>
                        <input type="number" id="new-session-max-turns" value="50" min="1" max="100">
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="new-session-autonomous" checked>
                            Autonomous Mode
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="hideCreateSessionModal()">Cancel</button>
                    <button class="btn btn-primary" onclick="createSession()">Create</button>
                </div>
            </div>
        </div>

        <!-- Delete Confirmation Modal -->
        <div class="modal-overlay hidden" id="delete-session-modal">
            <div class="modal modal-sm">
                <div class="modal-header">
                    <h3>Delete Session</h3>
                    <button class="btn-close" onclick="hideDeleteSessionModal()">√ó</button>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete session <strong id="delete-session-name"></strong>?</p>
                    <p class="text-muted">This will terminate the session and delete all associated data.</p>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" onclick="hideDeleteSessionModal()">Cancel</button>
                    <button class="btn btn-danger" onclick="confirmDeleteSession()">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
